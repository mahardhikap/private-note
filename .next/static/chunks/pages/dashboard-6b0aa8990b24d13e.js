(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{9218:function(e,t,a){!function(e){e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return(12===e&&(e=0),"pagi"===t)?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,a){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(a(381))},6117:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(9962)}])},6713:function(e,t,a){"use strict";a.d(t,{Gf:function(){return l},OD:function(){return s},Uw:function(){return o},jX:function(){return c},tu:function(){return i}});var n=a(7196),r=a(2947);let l=async e=>{try{return(await n.x.get("/articles/filtered",{params:e})).data}catch(e){r.Am.error(e.message)}},o=async e=>{try{return(await n.x.get("/article/".concat(e,"/detail"))).data}catch(e){r.Am.error(e.message)}},i=async e=>{try{let t=localStorage.getItem("token");return t&&(n.x.defaults.headers.common.Authorization="Bearer ".concat(t)),(await n.x.post("/article/post",e)).data}catch(e){r.Am.error(e.message)}},s=async(e,t)=>{try{let a=localStorage.getItem("token");return a&&(n.x.defaults.headers.common.Authorization="Bearer ".concat(a)),(await n.x.put("/article/".concat(e,"/edit"),t)).data}catch(e){r.Am.error(e.message)}},c=async e=>{try{let t=localStorage.getItem("token");return t&&(n.x.defaults.headers.common.Authorization="Bearer ".concat(t)),(await n.x.delete("/article/".concat(e,"/delete"))).data}catch(e){r.Am.error(e.message)}}},2870:function(e,t,a){"use strict";a.d(t,{I:function(){return r},c:function(){return l}});var n=a(7196);let r=async e=>{try{let t=localStorage.getItem("token");t&&(n.z.defaults.headers.common.Authorization="Bearer ".concat(t));let a=new FormData;e.forEach(e=>{a.append("image",e)});let r=await n.z.post("/upload",a,{headers:{"Content-Type":"multipart/form-data"}});if(r.data&&r.data.message&&r.data.filePaths)return r.data;throw Error("Unexpected response format")}catch(e){return console.error(e.message),null}},l=async e=>{try{let t=localStorage.getItem("token");t&&(n.z.defaults.headers.common.Authorization="Bearer ".concat(t));let a=await n.z.delete("/delete",{data:{filenames:e}});if(a.data&&a.data.deletedFiles)return a.data;throw Error("Unexpected response format")}catch(e){return console.error(e.message),null}}},409:function(e,t,a){"use strict";a.d(t,{Nq:function(){return i},ll:function(){return o},pH:function(){return l}});var n=a(7196),r=a(2947);let l=async e=>{try{return(await n.x.post("/user/login",e)).data}catch(e){r.Am.error(e.message)}},o=async()=>{try{let e=localStorage.getItem("token");return e&&(n.x.defaults.headers.common.Authorization="Bearer ".concat(e)),(await n.x.get("/user/detail")).data}catch(e){console.error(e.message)}},i=async(e,t)=>{try{let a=localStorage.getItem("token");return a&&(n.x.defaults.headers.common.Authorization="Bearer ".concat(a)),(await n.x.put("/user/".concat(e,"/update"),t)).data}catch(e){r.Am.error(e.message)}}},9481:function(e,t,a){"use strict";var n=a(5893);a(7294);var r=a(1163),l=a(5675),o=a.n(l);t.Z=e=>{let{id:t,image:a,title:l,date:i,content:s}=e,c=(0,r.useRouter)(),u=c.pathname;return console.log("ini lokasi",u),(0,n.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-2",children:[""===a||null===a?(0,n.jsx)("div",{className:"aspect-video col-span-1 rounded-xl bg-gray-400 flex items-center justify-center",children:(0,n.jsx)("div",{className:"font-light text-gray-200",children:"Image Not Uploaded"})}):(0,n.jsx)(o(),{src:null!==a?a:"",alt:"image-preview",height:1e3,width:1e3,className:"aspect-video col-span-1 rounded-xl object-cover"}),(0,n.jsxs)("div",{className:"col-span-2",children:[(0,n.jsx)("h2",{className:"font-bold text-lg",children:l}),(0,n.jsx)("p",{className:"text-xs font-extralight",children:i}),(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:s}}),(0,n.jsx)("button",{className:"underline",onClick:()=>"/dashboard"===u?c.push("/dashboard/".concat(t)):c.push("/detail/".concat(t)),children:"read more"})]})]})}},7838:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var n,r=a(5893),l=a(7294),o=a(1163),i=a(9672),s=a(1664),c=a.n(s),u=a(409),d=a(6455),m=a.n(d),h=(n=e=>{let{children:t}=e,a=(0,o.useRouter)(),n=a.pathname,l=()=>{m().fire({title:"Buru-buru amat?\uD83E\uDD28",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dd3333",cancelButtonColor:"#a5dc86",confirmButtonText:"Gas cabut",cancelButtonText:"Masih betah"}).then(e=>{e.isConfirmed&&m().fire({title:"Jangan lupa mampir lagi!\uD83D\uDE01",icon:"success",showConfirmButton:!1,timer:1500}).then(()=>{localStorage.clear(),a.replace("/login")})})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-center py-5 bg-white text-lg sticky top-0 z-10",children:[(0,r.jsx)("strong",{children:"Random"})," Admin Dashboard\uD83D\uDCBB"]}),(0,r.jsx)("div",{className:"mx-auto container p-3",children:(0,r.jsxs)("div",{className:"grid grid-cols-5 min-h-screen",children:[(0,r.jsx)("div",{className:"col-span-1 sticky top-20 h-fit",children:(0,r.jsx)("ul",{className:"flex flex-col gap-5",children:null===i.P||void 0===i.P?void 0:i.P.map((e,t)=>"logout"===e.action?(0,r.jsx)("li",{onClick:l,className:"cursor-pointer",children:(0,r.jsx)("span",{children:e.label})},t):(0,r.jsx)(c(),{href:e.url,children:(0,r.jsx)("li",{children:(0,r.jsx)("span",{className:"".concat(e.url===n?"border-b-2 border-black":""),children:e.label})})},t))})}),(0,r.jsx)("div",{className:"col-span-4",children:t})]})}),(0,r.jsx)("div",{className:"text-center my-5 font-semibold",children:"\xa92025 Random. All rights reserved."})]})},e=>{let t=(0,o.useRouter)();return(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,u.ll)();(null==e?void 0:e.code)!==200&&t.push("/login")}catch(e){console.error(e.message),t.push("/login")}})()},[t]),(0,r.jsx)(n,{...e})})},9672:function(e,t,a){"use strict";a.d(t,{P:function(){return r},c:function(){return n}});let n=[{url:"/",label:"Tulisan"},{url:"/login",label:"Login"}],r=[{url:"/dashboard",label:"Articles"},{url:"/dashboard/post",label:"Post"},{url:"/dashboard/profile",label:"Profile"},{url:"#",label:"Logout",action:"logout"}]},9962:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var n=a(5893),r=a(7294),l=a(7838),o=a(6713),i=a(2947),s=a(9481),c=a(1857),u=a(9696);class d extends Error{}d.prototype.name="InvalidTokenError";var m=a(1163),h=a(4207),g=a(2870),p=a(6455),f=a.n(p),v=()=>{var e,t,a,p,v,x,b;let y=(0,m.useRouter)(),[_,w]=(0,r.useState)(null),[k,j]=(0,r.useState)({limit:4,page:null!==(b=y.query.page)&&void 0!==b?b:1,search:"",searchby:"username",sort:"DESC",sortby:"created_at"}),[N,D]=(0,r.useState)(),M=async()=>{try{let e=await (0,o.Gf)(k);D(e)}catch(e){i.Am.error(e.message)}},S=e=>{if(k.page<e){let e=k.page+1;j(t=>({...t,page:e})),y.push({pathname:y.pathname,query:{...y.query,page:e}})}},C=async e=>{f().fire({title:"Mau delete artikel ini, yakin?\uD83E\uDD14",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dd3333",cancelButtonColor:"#a5dc86",confirmButtonText:"Gas hapus",cancelButtonText:"Gak jadi"}).then(t=>{t.isConfirmed&&f().fire({title:"Dihapus!\uD83D\uDC4C",icon:"success",showConfirmButton:!1,timer:1500}).then(async()=>{try{let a=await (0,o.Uw)(e);if((null==a?void 0:a.code)===200){var t;let n=(0,h.Q)((null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.image)||"");n&&await (0,g.c)([n]);let r=await (0,o.jX)(e);(null==r?void 0:r.code)===204?(i.Am.success(null==r?void 0:r.message),M()):i.Am.warning(null==r?void 0:r.message)}}catch(e){i.Am.error(null==e?void 0:e.message)}})})};return(0,r.useEffect)(()=>{let e=localStorage.getItem("token");if(e)try{let t=function(e,t){let a;if("string"!=typeof e)throw new d("Invalid token specified: must be a string");t||(t={});let n=!0===t.header?0:1,r=e.split(".")[n];if("string"!=typeof r)throw new d(`Invalid token specified: missing part #${n+1}`);try{a=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var a;return a=t,decodeURIComponent(atob(a).replace(/(.)/g,(e,t)=>{let a=t.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}catch(e){return atob(t)}}(r)}catch(e){throw new d(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(a)}catch(e){throw new d(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}(e);w(t)}catch(e){console.error(e.message)}},[]),(0,r.useEffect)(()=>{(null==_?void 0:_.username)&&j(e=>({...e,search:_.username}))},[_]),(0,r.useEffect)(()=>{(null==_?void 0:_.username)&&M()},[k]),(0,n.jsx)(l.Z,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-5",children:[null==N?void 0:null===(t=N.data)||void 0===t?void 0:null===(e=t.list)||void 0===e?void 0:e.map((e,t)=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"flex absolute top-0 p-2 gap-2",children:[(0,n.jsx)("button",{className:"underline text-green-500",onClick:()=>y.push("/dashboard/edit/".concat(e.id)),children:"Edit"}),(0,n.jsx)("button",{className:"underline text-red-500",onClick:()=>C(e.id),children:"Delete"})]}),(0,n.jsx)(s.Z,{id:null==e?void 0:e.id,image:null==e?void 0:e.image,title:(0,u.a)(null==e?void 0:e.title,50),date:(0,c.n)(null==e?void 0:e.created_at),content:(0,u.a)(null==e?void 0:e.article,200)})]},t)),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("button",{onClick:()=>{if(k.page>1){let e=k.page-1;j(t=>({...t,page:e})),y.push({pathname:y.pathname,query:{...y.query,page:e}})}},className:"font-bold",children:"← Prev"}),(0,n.jsxs)("button",{children:["Halaman ",(0,n.jsx)("strong",{children:null==N?void 0:null===(p=N.data)||void 0===p?void 0:null===(a=p.pagination)||void 0===a?void 0:a.pageNow})," dari"," ",(0,n.jsx)("strong",{children:null==N?void 0:null===(x=N.data)||void 0===x?void 0:null===(v=x.pagination)||void 0===v?void 0:v.totalPage})]}),(0,n.jsx)("button",{onClick:()=>{var e,t;return S(null==N?void 0:null===(t=N.data)||void 0===t?void 0:null===(e=t.pagination)||void 0===e?void 0:e.totalPage)},className:"font-bold",children:"Next →"})]})]})})}},7196:function(e,t,a){"use strict";a.d(t,{x:function(){return r},z:function(){return l}});var n=a(7066);let r=n.Z.create({baseURL:"http://localhost:3001",timeout:1e4,headers:{"Content-Type":"application/json"}}),l=n.Z.create({baseURL:"https://image.codefreaks.web.id",timeout:1e4,headers:{"Content-Type":"application/json"}})},1857:function(e,t,a){"use strict";a.d(t,{n:function(){return l}});var n=a(381),r=a.n(n);a(9218);let l=e=>(r().locale("id"),r()(e).format("dddd, DD MMMM YYYY"))},4207:function(e,t,a){"use strict";a.d(t,{Q:function(){return n}});let n=e=>{let t=e.split("/");return t[t.length-1]||null}},9696:function(e,t,a){"use strict";a.d(t,{a:function(){return n}});let n=(e,t)=>(null==e?void 0:e.length)<=t?e:(null==e?void 0:e.substring(0,t))+"..."}},function(e){e.O(0,[166,885,143,664,675,774,888,179],function(){return e(e.s=6117)}),_N_E=e.O()}]);